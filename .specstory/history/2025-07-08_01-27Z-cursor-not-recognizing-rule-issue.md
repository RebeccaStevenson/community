<!-- Generated by SpecStory -->

# Cursor not recognizing rule issue (2025-07-08 01:27Z)

_**User**_

why isn't cursor recognizing this rule

---

_**Assistant**_



---

Here are the most common reasons a Talon rule ( either a line in a `.talon` file or a Python-declared capture/list/action ) fails to show up or trigger. Walk through this checklist and you’ll usually find the culprit quickly.

1. File location / name  
   • The file must live inside `~/.talon/user/…` (in this repo that means the `community/custom/` folder).  
   • Talon reloads on every file save, but only if the file’s extension is **exactly** `.talon` or `.py`. A stray “.txt”, duplicated extension, or filename with spaces stops Talon from loading it.

2. Context header (everything above the `---` separator)  
   • If the header doesn’t match the current situation, none of the rules beneath will be active.  
   • Double-check:
     – `os:` matches your platform (`mac`, `windows`, or `linux`).  
     – `app.bundle:` / `app.name:` is correct (use Talon’s *Log* tab → gear → “Copy bundle” to get the real value).  
   • If there is no `---`, Talon treats the whole file as body, and any lines that *look* like header items are parsed as commands—which then fail silently.

3. Indentation and spacing in the command line  
   • Rule and body must be separated by a **colon**.  
   • The body must start on the same line (after the colon) or indented on the next line.  
   • Accidental leading spaces in the rule part make Talon consider it a continuation line and ignore it.

   Good:  
   ```
   hello world:
       insert("hi")
   ```
   Bad (leading space before “hello”):  
   ```
     hello world:
       insert("hi")
   ```

4. List / capture not registered  
   • If your rule references `{user.my_things}` or `<user.my_capture>` but the list/capture hasn’t been declared in Python (for lists) or both declared *and* populated (for lists) or implemented (for captures), the entire rule is skipped.  
   • Look in Talon’s log – you’ll see a warning like  
     `Could not find capture: user.my_capture`.

5. Python exceptions during reload  
   • Any error in *any* Python file cancels the whole reload. Open Talon’s *Log* window and search for “Traceback”. Until that error is fixed, Talon won’t load the new rule files.

6. Duplicate rule text in the same context  
   • Two commands with identical spoken forms in the same active context cause a conflict; Talon disables both. The log shows  
     `Duplicate rule: hello world`.

7. Mis-scoped comment markers  
   • Lines beginning with `#` are comments, but inside a rule body they’re **commands** (TalonScript comment is `#` + space).  
   • If you meant to comment out a body line, be sure the `#` is the first char after indentation.

8. Talon modes / tags  
   • If your rule is inside a `tag:` context, that tag must be enabled (`mode.enable("user.tag_name")`) or the rule won’t appear.  
   • Same for `mode:` contexts (e.g. `mode: sleep`).

9. Cached compilation bug  
   • Rarely, Talon’s compiled cache misbehaves. Quit Talon completely and reopen to force a clean reload.

How to debug quickly  
A. Save the file, then check the Talon *Log* tab immediately—errors almost always appear there.  
B. Use Talon’s *Command History* widget (Tools → Command History) to verify whether the rule appears and what it thinks its spoken form is.  
C. Temporarily remove the context header (`os: …`, `app.name: …`) to see if the rule appears globally. If it does, the header is mis-matching.

If you still don’t see the problem, paste the exact rule (both header and body) and I can pinpoint the issue.

---

